# Development Log

----

## 功能实现情况

1. 地面效果与元素互动 -> 基本实现
2. TileObject处理效果
   1. 移动效果
      1. 需要考虑object互相碰撞
   2. 攻击过程实现
      1. 索敌
      2. 播放攻击动画，动画过程中结算效果
   3. 实现受伤效果
   4. 实现被动移动效果
   5. 占用多格的tileObject的实现 -> *LOW LOW LOW priority 很可能不实现*
      1. 移动和索敌相关逻辑需要修改
3. 敌人AI
   1. 基于敌人当前环境（stage)和硬编码行动模式计算当前行动
   2. 需要设计合理接口容纳boss行为模式
   3. 需要基于行为定义
      1. 移动
      2. 攻击/互动？
4. NPC
   1. 需要实现NPC和对话系统
   2. 对话打开UI界面或者单纯进行剧情对话
5. 关卡编辑与生成
   1. 固定关卡地形和怪物配置点，从配置点中根据一定规则随机生成敌人
   2. 关卡可互动物品随机生成
   3. 特殊关卡
6. 物品
   1. 物品分为
      1. 拾取生效物品：心，钱，宝箱
         1. `TileObject, IPickUpable`
         2. 有没有可能敌人可以拾取道具然后使用道具呢？
            1. 可以有
      2. 背包道具：武器，一次性使用道具
         1. 占用背包格子
         2. 可以在战斗中使用
      3. 被动道具（遗物）：
         1. 统一化处理，占用！
         2. 不可使用，自动生效
   2. 物品的掉落和拾取
      1. 
   3. 使用物品的UI展示
   4. 武器升级
      1. 
7. 背包系统
   1. 需要背包管理的物品会占用一定格子
   2. 背包格子初始3x3，后续可以升级添加row/column
   3. 整理背包界面
      1. 
8. UI界面
   1. UIComponents
      1. 常态显示的抬头组件
      2. 左上状态框
         1. 体力
         2. 金币
      3. 左下信息栏
         1. Ground信息
         2. 敌人信息
      4. 右侧背包
      5. SelectTiles
   2. UIWindow
      1. 菜单
9. 跨局升级要素
   1. 解锁物品
   2. 解锁拾取道具
   3. 初始体力/金币/武器
   4. 解锁武器词条？
   5. 事件？
10. 随机性设计
    1. 单关内随机
       1. 地图随机生成
          1. 每个地图文件记录可出现层数
       2. 敌人配置随机
          1. 编辑地图时在地图上配置敌人初始位置点和这个位置可能出现的敌人id
          2. 读取关卡时，先确定本关的敌人数量，然后选择对应数量的初始位置。再从配置的id里面随机选择一个id最为最终结果
       3. 地图元素随机
    2. NPC对话随机
       1. 参考Hades
    3. 每层关卡组合随机
       1. 

---

## Daily Log

### 1.14
1. Todo: 背包系统， UI


### 1.13
1. Done:
   1. ItemAnim
   2. 被动推动效果的传递
      1. 拉动效果的传递不是很好实现，如果有设计的画可以考虑
2. Todo:
   1. 拉动效果需要考虑TileObject碰撞


### 1.12

1. Done:
   1. Toaster
   2. Effect:
      1. ITileObject作为效果执行以及传播的主体，可以通过stage来索敌
      2. 其他东西（Ground比如）的方法都返回IEffectTemplate，由caller来填补所需要的字段（比如索敌）
2. Todo:
   1. 攻击动画
      1. 当前解决方案：每个动画保存为prefab，由view动态加载
   2. 连锁效果结算动画的间隔
      1. 考虑优先播放动画然后在动画过程中consume效果？
         1. Model层更新滞后？
      2. 
